{"version":3,"sources":["../../mail/mailer.js"],"names":["nodemailer","require","mail","mailer","User","token","transporter","createTransport","host","port","secure","auth","user","pass","mailOptions","from","to","email","subject","firstName","html","encodeURIComponent","text","sendMail","error","info","console","log","messageId","module","exports"],"mappings":";;AAAA,IAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,YAAD,CAApB;;AAEA,IAAME,MAAM,GAAG,SAATA,MAAS,CAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AACpC,MAAMC,WAAW,GAAGN,UAAU,CAACO,eAAX,CAA2B;AAC7CC,IAAAA,IAAI,EAAE,gBADuC;AAE7CC,IAAAA,IAAI,EAAE,GAFuC;AAG7CC,IAAAA,MAAM,EAAE,KAHqC;AAG9B;AACfC,IAAAA,IAAI,EAAE;AACJC,MAAAA,IAAI,EAAE,4BADF;AAEJC,MAAAA,IAAI,EAAE;AAFF;AAJuC,GAA3B,CAApB,CADoC,CAWpC;;AACA,MAAMC,WAAW,GAAG;AAClBC,IAAAA,IAAI,EAAE,qDADY;AAC2C;AAC7DC,IAAAA,EAAE,EAAEZ,IAAI,CAACa,KAFS;AAEF;AAChBC,IAAAA,OAAO,4CAAqCd,IAAI,CAACe,SAA1C,MAHW;AAG6C;AAC/DC,IAAAA,IAAI,EAAElB,IAAI,CAACmB,kBAAkB,CAAChB,KAAD,CAAnB,EAA4BD,IAA5B,CAJQ;AAKlBkB,IAAAA,IAAI,6DAAsDD,kBAAkB,CAAChB,KAAD,CAAxE;AALc,GAApB,CAZoC,CAoBpC;;AACAC,EAAAA,WAAW,CAACiB,QAAZ,CAAqBT,WAArB,EAAkC,UAACU,KAAD,EAAQC,IAAR,EAAiB;AACjD,QAAID,KAAJ,EAAW;AACT,aAAOE,OAAO,CAACC,GAAR,CAAYH,KAAZ,CAAP;AACD;;AACDE,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCF,IAAI,CAACG,SAArC;AACD,GALD;AAMD,CA3BD;;AA4BAC,MAAM,CAACC,OAAP,GAAiB3B,MAAjB","sourcesContent":["const nodemailer = require('nodemailer');\nconst mail = require('./template');\n\nconst mailer = function (User, token) {\n  const transporter = nodemailer.createTransport({\n    host: 'smtp.gmail.com',\n    port: 587,\n    secure: false, // true for 465, false for other ports\n    auth: {\n      user: 'campushappiness2@gmail.com',\n      pass: 'campusbonheur',\n    },\n  });\n\n  // setup email data with unicode symbols\n  const mailOptions = {\n    from: '\"Campus happyness team\" <campushapiness2@gmail.com>', // sender address\n    to: User.email, // list of receivers\n    subject: `Nous avons besoin de votre avis ${User.firstName}?`, // Subject line\n    html: mail(encodeURIComponent(token), User),\n    text: `Magic link: http://localhost:3000/sondage/?token=${encodeURIComponent(token)}`,\n  };\n\n  // send mail with defined transport object\n  transporter.sendMail(mailOptions, (error, info) => {\n    if (error) {\n      return console.log(error);\n    }\n    console.log('Message sent: %s', info.messageId);\n  });\n};\nmodule.exports = mailer;\n"],"file":"mailer.js"}