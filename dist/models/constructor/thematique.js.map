{"version":3,"sources":["../../../models/constructor/thematique.js"],"names":["Sequelize","require","id_generator","thematiqueConstructor","sequelize","Thematique","define","id","allowNull","type","STRING","primaryKey","name","timestamps","addThematique","Promise","resolve","sync","then","findOrCreate","where","defaults","spread","thematique","dataValues","module","exports"],"mappings":";;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,IAAMC,YAAY,GAAGD,OAAO,CAAC,kCAAD,CAA5B;;AAEA,IAAME,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAUC,SAAV,EAAqB;AACjD,MAAMC,UAAU,GAAGD,SAAS,CAACE,MAAV,CAAiB,YAAjB,EAA+B;AAChDC,IAAAA,EAAE,EAAE;AACFC,MAAAA,SAAS,EAAE,KADT;AAEFC,MAAAA,IAAI,EAAET,SAAS,CAACU,MAFd;AAGFC,MAAAA,UAAU,EAAE;AAHV,KAD4C;AAMhDC,IAAAA,IAAI,EAAE;AACJJ,MAAAA,SAAS,EAAE,KADP;AAEJC,MAAAA,IAAI,EAAET,SAAS,CAACU;AAFZ;AAN0C,GAA/B,EAUhB;AACDG,IAAAA,UAAU,EAAE;AADX,GAVgB,CAAnB;;AAaAR,EAAAA,UAAU,CAACS,aAAX,GAA2B,UAAUF,IAAV,EAAgB;AAAE;AAC3C,WAAO,IAAIG,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpCX,MAAAA,UAAU,CAACY,IAAX,GAAkBC,IAAlB,CAAuB,YAAM;AAC3Bb,QAAAA,UAAU,CAACc,YAAX,CAAwB;AACtBC,UAAAA,KAAK,EAAE;AAAER,YAAAA,IAAI,EAAEA;AAAR,WADe;AAEtBS,UAAAA,QAAQ,EAAE;AAAET,YAAAA,IAAI,EAAEA,IAAR;AAAcL,YAAAA,EAAE,EAAEL,YAAY;AAA9B;AAFY,SAAxB,EAGGoB,MAHH,CAGU,UAACC,UAAD,EAAgB;AACxBP,UAAAA,OAAO,CAACO,UAAU,CAACC,UAAZ,CAAP;AACD,SALD;AAMD,OAPD;AAQD,KATM,CAAP;AAUD,GAXD;;AAYA,SAAOnB,UAAP;AACD,CA3BD;;AA6BAoB,MAAM,CAACC,OAAP,GAAiBvB,qBAAjB","sourcesContent":["const Sequelize = require('sequelize');\nconst id_generator = require('../../custom_module/id_generator');\n\nconst thematiqueConstructor = function (sequelize) {\n  const Thematique = sequelize.define('thematique', {\n    id: {\n      allowNull: false,\n      type: Sequelize.STRING,\n      primaryKey: true,\n    },\n    name: {\n      allowNull: false,\n      type: Sequelize.STRING,\n    },\n  }, {\n    timestamps: false,\n  });\n  Thematique.addThematique = function (name) { // id optionnal\n    return new Promise(function (resolve) {\n      Thematique.sync().then(() => {\n        Thematique.findOrCreate({ \n          where: { name: name },\n          defaults: { name: name, id: id_generator() },\n        }).spread((thematique) => {\n          resolve(thematique.dataValues);\n        });\n      });\n    });\n  };\n  return Thematique;\n};\n\nmodule.exports = thematiqueConstructor;"],"file":"thematique.js"}